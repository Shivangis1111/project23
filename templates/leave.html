<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>application form</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-4.3.1-dist">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href="style.css" rel="stylesheet">
    {% block active_leave %}
        
    {% endblock %}
   

    <style>
        *{
            margin:0px;
            padding:0px;
            box-sizing: border-box;
            /* background: rgb(213, 235, 174); */
        }
        .container{
               margin-left: 100px;
                /* margin:50px; */
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                /* min-width:100vh; */
        }
       .panel-heading{
                height:100px;
                width:100%;
                background-color:rgb(34, 34, 138);
       }
       h1{
             text-align: center;
             font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
             font-weight:bold;
             padding:4%;
             color: white;
       }

       .panel-body{
        border: solid 4px rgb(34, 34, 138);
        font-family: 'Times New Roman', Times, serif;
        font-size: larger;
        width:100vw;
        box-shadow: 5px 5px 10px  #999;
       }

       .row {
            padding:10px;
            box-shadow:5px  grey;
            height: 100vh;
       }

       /* #button{
        padding-bottom: 30px;
        height:0px;
       } */
    </style>
</head>
<body>
{% block body %}
    <div class="container">
        <div class="row col-md-6 col-md-offset-3">
            <div class="panel-heading" style="box-shadow:5px 5px 10px  #999 ;">
                <h1 style="background-color:rgb(34,34,138)";>Application Form</h1>
            </div>
            <div class="panel-body">
                   
                    <form action="{% url 'leave' %}"  onsubmit="che()" id="form_id" method="post">
                         {% csrf_token %}
                        <div class="form-group">
                            {% for j in data %}
                            <label for="studentname">Student Name</label>
                            <input type="text" class="form-control" id="studentname" name="s_name" value="{{j.s_name}}">
                        </div>
                        <div class="form-group">
                            <label for="rollno">Roll Number</label>
                            <input type="number" class="form-control" id="rollno" value="{{j.s_roll}}" disabled>
                        </div>
                        <div class="form-group">
                            <label for="fathername">Father's Name</label>
                            <input type="text" class="form-control" id="fathername" value="{{j.p_name}}" disabled>
                        </div>
                        <div class="form-group">
                            <label for="smartid">Smart ID</label>
                            <input type="text" class="form-control" id="smartid" name="s_id" value="{{j.s_id}}">
                        </div>
                        <div class="form-group">
                            <label for="class">Class</label>
                            <input type="text" class="form-control" id="class" value="{{j.s_class}}" disabled>
                        </div>
                        <div class="form-group">
                            <label for="hostelname">Hostel Name</label>
                            <input type="text" class="form-control" id="hostelname" value="{{j.hostel}}" disabled>
                        </div>
                            {% endfor %}
                        <div class="form-group">
                            <label for="reason">Reason of applying for leave</label>
                            <input type="text" class="form-control" id="reason" required name="reason">
                        </div>
                        <div class="form-group">
                            <label for="datee">Date of going on leave</label><br>
                            From<input type="date" class="form-control" id="fdate" value=fdate  required name="s_date">
                            To<input type="date" class="form-control" id="tdate" value=tdate  required name="e_date"><br>
                            {% comment %} Days:<input type="text"  class="form-control" id="dayss" name="nod" onclick="calculateDays()">   {% endcomment %}
                            Days:<input type="text" id="dayss" name="nod" pattern="[1-9]" title="Days should be less than 10"><br>

                            
                        </div>
                        <div class="form-group">
                            <label for="p">Whether the student is permitted to go alone?</label><br>
                            <input type="radio" id="yes" onclick="text(0)" value="True" name="go_alone" >
                            <label for="html">Yes</label>
                            <input type="radio" id="no" onclick="text(1)" value="False" name="go_alone" >
                            <label for="css">No</label><br>
                        </div>
                        <div class="form-group" id="mycode">
                            <label></label><br>
                            <div class="form-group">
                                <label for="ntname">Name</label>
                                <input type="text" class="form-control" id="ntname" name="person_name" >
                            </div>
                            <div class="form-group">
                                <label for="ntname">Relationship with the student</label>
                                <input type="text" class="form-control" id="ntname" name="relation" >
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <input type="text" class="form-control" id="address" name="per_add" >
                            </div>
                         
                            <div class="form-group">
                                <label for="address">Phone Number</label>
                                <input type="text" class="form-control" id="address" name="per_pno" >
                            </div>
                        </div><br>
                         {% comment %} <input type="submit" class="btn btn-primary" id="sub" onclick="calculateDays()" style="background-color: rgb(34, 34, 138);"><br>  {% endcomment %}
                        <button class="btn btn-primary" id="sub"  style="background-color: rgb(34, 34, 138);">submit</button><br>
                        <label></label>
                       
                    </form>
                    <!-- <button class="btn btn-primary" id="sub" onclick="calculateDays()" style="background-color: rgb(34, 34, 138);">submit</button><br> -->
            </div>
            <div class="panel-footer text-dark">
               <small> &copy; Banasthali Vidyapith</small>
            </div>
        </div>
    </div>
  
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
         document.querySelector('#tdate').onchange = function(){
         let dtFrom = document.querySelector('#fdate').value;
          let dtTo = new Date(dtFrom);
          dtTo.setDate(dtTo.getDate() + 10);
          let sMonthTo = ((dtTo.getMonth() + 1) < 10 ? '0' + (dtTo.getMonth() + 1) : (dtTo.getMonth() + 1));
          let sDayTo = (dtTo.getDate() < 10 ? '0' + dtTo.getDate() : dtTo.getDate());
          document.querySelector('#tdate').setAttribute('max', dtTo.getFullYear() + '-' + sMonthTo + '-' + sDayTo);
        }
    </script>
    <script>
    //     x=document.forms[0].elements[7].value;
    //     y=document.forms[0].elements[8].value;
    //     date1=new Date(x);
    //     date2=new Date(y);
    //     var Difference_In_Time = date2.getTime() - date1.getTime();
    //     var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);
    //     document.getElementById("date").innerHTML= Difference_In_Days ;
       
    function calculateDays(){
        var da1=document.getElementById("fdate").value;
        var da2=document.getElementById("tdate").value;
        const dateOne=new Date(da1);
        const dateTwo=new Date(da2);
        const time=Math.abs(dateTwo-dateOne);
        const days=Math.cell(time/(1000*60*60*24));
        document.getElementById("dayss").value.innerHTML=days;
    }

      
    </script>
<script>
        function text(x){
            if (x==1){
                document.getElementById("mycode").style.display="block";
            }
            else{
                document.getElementById("mycode").style.display="none";
            }

        }



          /*function che(){
            event.preventDefault();
            swal({
                        title: "Form Submitted Successfully!!",
                        icon: "success",
                        button: "Ok",
                        timer:0
                        
                });
               
               
          }*/

         

    </script>
    <script>
        var todayDate = new Date();
        var month = todayDate.getMonth()+1;
        var tdate = todayDate.getDate();
        if (tdate < 10) {
            tdate = '0' + tdate;
        }
        if (month <= 10) {
            month = '0' + month; 
            
        }
       
        var year = todayDate.getUTCFullYear()-0; 
        var minDate = year + "-" + month + "-" + tdate;
        document.getElementById("fdate").setAttribute("min", minDate);
        console.log(minDate);
    </script>
    <script>
        var todayDate = new Date();
        var month = todayDate.getMonth()+1;
        var tdate = todayDate.getDate();
        if (tdate < 10) {
            tdate = '0' + tdate;
        }
        if (month <= 10) {
            month = '0' + month; 
            
        }
       
        var year = todayDate.getUTCFullYear()-0; 
        var minDate = year + "-" + month + "-" + tdate;
        document.getElementById("tdate").setAttribute("min", minDate);
        console.log(minDate);
    </script>


    
  
    {% endblock %}
</body>
</html>
